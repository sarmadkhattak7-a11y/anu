<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For Queen Anu</title>
    
    <!-- Tailwind CSS (Version 3.3.5 to prevent errors) -->
    <script src="https://cdn.tailwindcss.com/3.3.5"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Lato', sans-serif; }
        h1, h2, h3, h4, h5, h6, .font-serif { font-family: 'Playfair Display', serif; }
        
        .animate-spin-slow { animation: spin 10s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        
        .animate-fade-in { animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // --- GLOBALS ---
        const { useState, useEffect, useRef } = React;

        // --- ICONS (Built-in to prevent errors) ---
        const Icon = ({ children, className, ...props }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} {...props}>
                {children}
            </svg>
        );

        const Heart = (props) => <Icon {...props}><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z" /></Icon>;
        const Crown = (props) => <Icon {...props}><path d="m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14" /></Icon>;
        const Sparkles = (props) => <Icon {...props}><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275-1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M9 5H3"/><path d="M19 19v4"/><path d="M22 21h-6"/><path d="M21 5h-4"/><path d="M19 3v4"/><path d="M5 21H3"/><path d="M5 19v4"/></Icon>;
        const Gift = (props) => <Icon {...props}><rect x="3" y="8" width="18" height="4" rx="1" /><path d="M12 8v13" /><path d="M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7" /><path d="M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5" /></Icon>;
        const Play = (props) => <Icon {...props}><polygon points="5 3 19 12 5 21 5 3" /></Icon>;
        const Pause = (props) => <Icon {...props}><rect x="6" y="4" width="4" height="16" /><rect x="14" y="4" width="4" height="16" /></Icon>;
        const Camera = (props) => <Icon {...props}><path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z" /><circle cx="12" cy="13" r="3" /></Icon>;
        const Calendar = (props) => <Icon {...props}><rect width="18" height="18" x="3" y="4" rx="2" ry="2" /><line x1="16" x2="16" y1="2" y2="6" /><line x1="8" x2="8" y1="2" y2="6" /><line x1="3" x2="21" y1="10" y2="10" /></Icon>;
        const ImageIcon = (props) => <Icon {...props}><rect width="18" height="18" x="3" y="3" rx="2" ry="2" /><circle cx="9" cy="9" r="2" /><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21" /></Icon>;
        const Mail = (props) => <Icon {...props}><rect width="20" height="16" x="2" y="4" rx="2" /><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7" /></Icon>;
        const Quote = (props) => <Icon {...props}><path d="M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z" /><path d="M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z" /></Icon>;
        const Shuffle = (props) => <Icon {...props}><path d="M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l14.2-12.6c.8-1 1.9-1.7 3.1-1.7H22" /><path d="m2 5 1.5 1.4c1.3 1.2 3 1.9 4.8 1.9h.8" /><path d="M15.7 15.7c.8 1 1.9 1.7 3.1 1.7H22" /></Icon>;
        const Wand2 = (props) => <Icon {...props}><path d="m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z" /><path d="m14 7 3 3" /><path d="M5 6v4" /><path d="M19 14v4" /><path d="M10 2v2" /><path d="M7 8H3" /><path d="M21 16h-4" /><path d="M11 3H9" /></Icon>;
        const Moon = (props) => <Icon {...props}><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z" /></Icon>;
        const Feather = (props) => <Icon {...props}><path d="M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z" /><line x1="16" x2="2" y1="8" y2="22" /><line x1="17.5" x2="9" y1="15" y2="15" /></Icon>;
        const Map = (props) => <Icon {...props}><polygon points="3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21" /><line x1="9" x2="9" y1="3" y2="18" /><line x1="15" x2="15" y1="6" y2="21" /></Icon>;
        const Star = (props) => <Icon {...props}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" /></Icon>;
        const MessageCircle = (props) => <Icon {...props}><path d="m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z" /></Icon>;
        const X = (props) => <Icon {...props}><path d="M18 6 6 18" /><path d="m6 6 12 12" /></Icon>;
        const Headphones = (props) => <Icon {...props}><path d="M3 18v-6a9 9 0 0 1 18 0v6" /><path d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z" /></Icon>;
        const Calculator = (props) => <Icon {...props}><rect width="16" height="20" x="4" y="2" rx="2" /><line x1="8" x2="16" y1="6" y2="6" /><line x1="16" x2="16" y1="14" y2="18" /><path d="M16 10h.01" /><path d="M12 10h.01" /><path d="M8 10h.01" /><path d="M12 14h.01" /><path d="M8 14h.01" /><path d="M12 18h.01" /><path d="M8 18h.01" /></Icon>;

        // --- COMPONENTS ---

        const ConfettiCanvas = ({ isActive }) => {
            const canvasRef = useRef(null);
            const animationFrameId = useRef(null);

            useEffect(() => {
                if (isActive) {
                    const canvas = canvasRef.current;
                    const ctx = canvas.getContext('2d');
                    canvas.width = window.innerWidth;
                    canvas.height = window.innerHeight;
                    
                    const particles = [];
                    for (let i = 0; i < 300; i++) {
                        particles.push({
                            x: canvas.width / 2,
                            y: canvas.height / 2 + 100,
                            size: Math.random() * 8 + 4,
                            speedX: Math.random() * 6 - 3,
                            speedY: Math.random() * -15 - 5,
                            color: ['hsl(330, 100%, 85%)', 'hsl(300, 100%, 90%)', 'hsl(45, 100%, 70%)', 'hsl(0, 0%, 100%)'][Math.floor(Math.random() * 4)],
                            life: 100,
                            decay: Math.random() * 0.5 + 1
                        });
                    }

                    const animate = () => {
                        ctx.clearRect(0, 0, canvas.width, canvas.height);
                        particles.forEach((p, index) => {
                            p.x += p.speedX;
                            p.y += p.speedY;
                            p.speedY += 0.5; // Gravity
                            p.life -= p.decay;
                            p.size *= 0.96;
                            
                            ctx.fillStyle = p.color;
                            ctx.beginPath();
                            ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                            ctx.fill();

                            if (p.life <= 0 || p.size <= 0.1) particles.splice(index, 1);
                        });
                        if (particles.length > 0) {
                            animationFrameId.current = requestAnimationFrame(animate);
                        }
                    };
                    animate();
                }
                return () => cancelAnimationFrame(animationFrameId.current);
            }, [isActive]);

            return <canvas ref={canvasRef} className={`fixed inset-0 pointer-events-none z-50 ${isActive ? 'block' : 'hidden'}`} />;
        };

        const FileUpload = ({ onUpload, id }) => {
            const fileInputRef = useRef(null);
            const handleClick = () => fileInputRef.current.click();
            const handleChange = (e) => {
                const file = e.target.files[0];
                if (file) {
                    const imageUrl = URL.createObjectURL(file);
                    onUpload(imageUrl);
                }
            };
            return (
                <React.Fragment>
                    <input type="file" ref={fileInputRef} onChange={handleChange} accept="image/*" className="hidden" />
                    <button onClick={handleClick} className="absolute bottom-4 right-4 bg-white/80 backdrop-blur-sm p-3 rounded-full shadow-lg hover:bg-white text-pink-400 transition-all z-20 group border-2 border-pink-100" title="Change photo">
                        <Camera className="w-5 h-5 group-hover:scale-110 transition-transform" />
                    </button>
                </React.Fragment>
            );
        };

        const SectionHeading = ({ title, subtitle, icon: Icon }) => (
            <div className="text-center mb-16 relative">
                <div className="inline-flex items-center justify-center p-4 bg-pink-50 rounded-full mb-6 ring-4 ring-pink-100 shadow-sm">
                    {Icon && <Icon className="w-8 h-8 text-pink-400" />}
                </div>
                <h2 className="text-4xl md:text-5xl font-extrabold text-gray-800 font-serif mb-4 tracking-wide">{title}</h2>
                <div className="flex items-center justify-center gap-2 mb-6">
                    <div className="h-px w-12 bg-pink-300"></div>
                    <Heart className="w-4 h-4 text-pink-400 fill-pink-400" />
                    <div className="h-px w-12 bg-pink-300"></div>
                </div>
                <p className="text-xl text-gray-500 max-w-2xl mx-auto font-light leading-relaxed">{subtitle}</p>
            </div>
        );

        const Navbar = ({ isPlaying, toggleAudio }) => (
            <nav className="fixed w-full z-40 bg-white/90 backdrop-blur-md shadow-sm border-b border-pink-100">
                <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div className="flex justify-between h-20 items-center">
                        <div className="flex items-center gap-3">
                            <div className="bg-pink-100 p-2 rounded-full">
                                <Crown className="w-6 h-6 text-pink-500" />
                            </div>
                            <span className="font-serif text-2xl font-bold text-gray-800 tracking-wide">
                                Queen <span className="text-pink-500">Anu</span>
                            </span>
                        </div>
                        <button onClick={toggleAudio} className={`flex items-center gap-2 px-6 py-2.5 rounded-full transition-all duration-300 shadow-sm ${isPlaying ? 'bg-pink-100 text-pink-600 ring-2 ring-pink-200' : 'bg-white border border-pink-200 text-gray-600 hover:bg-pink-50'}`}>
                            {isPlaying ? <Pause className="w-4 h-4" /> : <Play className="w-4 h-4" />}
                            <span className="text-sm font-medium">{isPlaying ? 'Playing Melody' : 'Play Music'}</span>
                        </button>
                    </div>
                </div>
            </nav>
        );

        const Hero = ({ triggerConfetti }) => {
            const [heroImage, setHeroImage] = useState("https://images.unsplash.com/photo-1513201099705-a9746e1e201f?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80");
            const spotifyLink = "https://open.spotify.com/playlist/37i9dQZF1DXcBWIGoYBM5M";

            return (
                <div className="relative pt-32 pb-20 lg:pt-40 lg:pb-32 overflow-hidden bg-gradient-to-b from-pink-50 via-white to-pink-50">
                    <div className="absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none">
                        <div className="absolute top-10 right-10 text-pink-200 opacity-50"><Sparkles className="w-12 h-12" /></div>
                        <div className="absolute bottom-20 left-20 text-pink-200 opacity-50"><Sparkles className="w-16 h-16" /></div>
                        <div className="absolute top-1/2 left-10 w-64 h-64 bg-pink-200 rounded-full blur-3xl opacity-20"></div>
                        <div className="absolute bottom-10 right-10 w-96 h-96 bg-purple-200 rounded-full blur-3xl opacity-20"></div>
                    </div>
                    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
                        <div className="flex flex-col lg:flex-row items-center gap-12 lg:gap-20">
                            <div className="lg:w-1/2 text-center lg:text-left">
                                <div className="inline-flex items-center gap-2 mb-8 px-5 py-2 rounded-full border border-pink-200 bg-white/80 backdrop-blur text-pink-500 text-sm font-semibold tracking-wider uppercase shadow-sm">
                                    <Crown className="w-3.5 h-3.5" /> <span>Anu, You are cherished</span> <Crown className="w-3.5 h-3.5" />
                                </div>
                                <h1 className="text-5xl md:text-6xl lg:text-7xl font-extrabold text-gray-800 font-serif mb-6 leading-tight">
                                    To Anu, The Princess of <br/><span className="text-transparent bg-clip-text bg-gradient-to-r from-pink-400 to-purple-400">My Entire World</span>
                                </h1>
                                <p className="max-w-2xl mx-auto lg:mx-0 text-xl text-gray-500 mb-8 leading-relaxed font-light">
                                    Every day with you feels like a page out of a fairy tale. Thank you for filling my life with magic, love, and endless happiness.
                                </p>
                                <div className="flex flex-wrap gap-4 justify-center lg:justify-start mb-8 lg:mb-0">
                                    <button onClick={triggerConfetti} className="bg-white/95 backdrop-blur text-pink-500 px-8 py-4 rounded-full font-bold shadow-xl hover:scale-105 transition-transform inline-flex items-center gap-3 border border-pink-100">
                                        <Gift className="w-5 h-5" /> Send Love
                                    </button>
                                    <a href={spotifyLink} target="_blank" rel="noopener noreferrer" className="bg-green-500 text-white px-8 py-4 rounded-full font-bold shadow-xl hover:bg-green-600 hover:scale-105 transition-all inline-flex items-center gap-3">
                                        <Headphones className="w-5 h-5" /> Our Playlist
                                    </a>
                                </div>
                            </div>
                            <div className="lg:w-1/2 relative group w-full">
                                <div className="absolute -inset-4 border-2 border-dashed border-pink-200 rounded-[2rem] z-0 animate-spin-slow" style={{ animationDuration: '60s' }}></div>
                                <div className="absolute -inset-1 bg-gradient-to-r from-pink-200 to-purple-200 rounded-[1.5rem] blur opacity-50 group-hover:opacity-80 transition duration-500"></div>
                                <div className="relative rounded-[1.5rem] overflow-hidden aspect-[4/5] bg-white shadow-2xl border-4 border-white">
                                    <img src={heroImage} alt="My Queen" className="w-full h-full object-cover transform group-hover:scale-105 transition duration-1000 ease-out" />
                                    <div className="absolute inset-0 bg-gradient-to-t from-black/30 to-transparent opacity-60"></div>
                                    <FileUpload onUpload={setHeroImage} id="hero" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const OurJourney = () => {
            const [milestones, setMilestones] = useState([
                { id: 1, year: "2013", title: "Class 6 - Where It Began", description: "Two kids in a classroom, not knowing they were about to start the most beautiful story ever told.", icon: Heart, image: "https://images.unsplash.com/photo-1509062522246-3755977927d7?auto=format&fit=crop&w=400&q=80" },
                { id: 2, year: "Now", title: "Forever & Always", description: "Years have passed, we've grown up side by side, and my love for you has only grown stronger.", icon: Crown, image: "https://images.unsplash.com/photo-1516589178581-6cd7833ae3b2?auto=format&fit=crop&w=400&q=80" }
            ]);
            const updateMilestoneImage = (id, newSrc) => {
                setMilestones(milestones.map(m => m.id === id ? { ...m, image: newSrc } : m));
            };
            return (
                <div className="py-24 bg-pink-50/30">
                    <div className="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
                        <SectionHeading title="Our Journey" subtitle="From Class 6 to forever, every moment with you is a treasure." icon={Calendar} />
                        <div className="relative">
                            <div className="absolute left-4 md:left-1/2 transform md:-translate-x-1/2 h-full w-0.5 bg-pink-200"></div>
                            <div className="space-y-12">
                                {milestones.map((milestone, index) => {
                                    const IconComponent = milestone.icon;
                                    return (
                                        <div key={milestone.id} className={`relative flex flex-col md:flex-row items-center ${index % 2 === 0 ? 'md:flex-row-reverse' : ''}`}>
                                            <div className="w-full md:w-1/2 pl-12 md:pl-0 md:px-8">
                                                <div className={`bg-white p-6 rounded-2xl shadow-md border border-pink-100 hover:shadow-xl transition-all ${index % 2 === 0 ? 'md:text-left' : 'md:text-right'}`}>
                                                    <div className={`flex flex-col ${index % 2 === 0 ? 'md:flex-row' : 'md:flex-row-reverse'} gap-4 items-center`}>
                                                        <div className="flex-1">
                                                            <span className="inline-block px-3 py-1 bg-pink-100 text-pink-600 text-sm font-bold rounded-full mb-3">{milestone.year}</span>
                                                            <h3 className="text-xl font-bold text-gray-800 mb-2">{milestone.title}</h3>
                                                            <p className="text-gray-600 font-light text-sm">{milestone.description}</p>
                                                        </div>
                                                        <div className="relative w-24 h-24 flex-shrink-0 group">
                                                            <img src={milestone.image} alt={milestone.title} className="w-full h-full object-cover rounded-lg border-2 border-pink-100 shadow-sm" />
                                                            <FileUpload onUpload={(src) => updateMilestoneImage(milestone.id, src)} id={`journey-${milestone.id}`} />
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div className="absolute left-4 md:left-1/2 transform -translate-x-1/2 w-10 h-10 bg-white border-4 border-pink-300 rounded-full flex items-center justify-center z-10 shadow-sm">
                                                <IconComponent className="w-4 h-4 text-pink-500" />
                                            </div>
                                            <div className="hidden md:block w-1/2"></div>
                                        </div>
                                    );
                                })}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const Gallery = () => {
            const [photos, setPhotos] = useState([
                { id: 1, src: "https://images.unsplash.com/photo-1522673607200-1645062cd958?auto=format&fit=crop&w=800&q=80", caption: "Our Adventure" },
                { id: 2, src: "https://images.unsplash.com/photo-1517457373958-b7bdd4587205?auto=format&fit=crop&w=800&q=80", caption: "Growing Up Together" },
                { id: 3, src: "https://images.unsplash.com/photo-1516589178581-6cd7833ae3b2?auto=format&fit=crop&w=800&q=80", caption: "Forever To Go" },
            ]);
            const updatePhoto = (id, newSrc) => setPhotos(photos.map(p => p.id === id ? { ...p, src: newSrc } : p));
            return (
                <div className="bg-white py-24">
                    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                        <SectionHeading title="Our Fairy Tale" subtitle="Collecting moments with you is my favorite hobby." icon={ImageIcon} />
                        <div className="grid md:grid-cols-3 gap-10">
                            {photos.map((photo) => (
                                <div key={photo.id} className="relative group">
                                    <div className="bg-white p-4 rounded-t-full rounded-b-3xl shadow-lg border border-pink-50">
                                        <div className="relative aspect-[3/4] overflow-hidden rounded-t-[100px] rounded-b-xl">
                                            <img src={photo.src} alt={photo.caption} className="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110" />
                                            <div className="absolute inset-0 bg-pink-500/0 group-hover:bg-pink-500/10 transition-colors duration-300"></div>
                                            <FileUpload onUpload={(src) => updatePhoto(photo.id, src)} id={`gallery-${photo.id}`} />
                                        </div>
                                        <div className="pt-6 pb-2 text-center">
                                            <p className="font-serif italic text-xl text-gray-700">{photo.caption}</p>
                                        </div>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            );
        };

        const OpenWhenLetters = () => {
            const [activeLetter, setActiveLetter] = useState(null);
            const letters = [
                { id: 1, title: "Open when you miss me", content: "Chop karo air ao galay galay karay", icon: "üíå", color: "bg-pink-100" },
                { id: 2, title: "Open when you need a smile", content: "Stop frowning, you'll get wrinkles! Just kidding, you're perfect. But seriously, smile! I love you more than I love annoying you... and you know that's my favorite hobby. üòâ", icon: "üòÑ", color: "bg-purple-100" },
                { id: 3, title: "Open when you feel stressed", content: "You are stronger than you know. Take it one step at a time. I believe in you more than anyone else in this world. You've got this, Anu.", icon: "üåø", color: "bg-green-100" },
                { id: 4, title: "Open when you can't sleep", content: "Look up at the moon. I'm looking at it too. Let the stars be your nightlight and my love be your blanket. Shaba khair, beautiful.", icon: "üåô", color: "bg-indigo-100" }
            ];
            return (
                <div className="py-24 bg-pink-50/50">
                    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                        <SectionHeading title="Letters for My Love" subtitle="Little reminders for every mood, just for you." icon={Mail} />
                        <div className="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
                            {letters.map((letter) => (
                                <button key={letter.id} onClick={() => setActiveLetter(letter)} className={`${letter.color} p-8 rounded-2xl shadow-sm hover:shadow-xl hover:-translate-y-2 transition-all duration-300 text-center group border border-white/50`}>
                                    <div className="text-4xl mb-4 transform group-hover:scale-110 transition-transform">{letter.icon}</div>
                                    <h3 className="font-serif font-bold text-gray-800 text-lg group-hover:text-pink-600 transition-colors">{letter.title}</h3>
                                </button>
                            ))}
                        </div>
                        {activeLetter && (
                            <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm animate-fade-in">
                                <div className="bg-white rounded-2xl p-8 max-w-lg w-full relative shadow-2xl border-4 border-pink-100">
                                    <button onClick={() => setActiveLetter(null)} className="absolute top-4 right-4 text-gray-400 hover:text-gray-600"><X className="w-6 h-6" /></button>
                                    <div className="text-center">
                                        <div className="inline-block p-4 rounded-full bg-pink-50 mb-6 text-4xl">{activeLetter.icon}</div>
                                        <h3 className="text-2xl font-serif font-bold text-gray-900 mb-4">{activeLetter.title}</h3>
                                        <div className="h-px w-24 bg-pink-200 mx-auto mb-6"></div>
                                        <p className="text-gray-600 text-lg leading-relaxed font-handwriting italic">"{activeLetter.content}"</p>
                                        <div className="mt-8 text-pink-400 font-serif text-sm">With all my love</div>
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        const ReasonsWhy = () => {
            const [currentReason, setCurrentReason] = useState(null);
            const [isAnimating, setIsAnimating] = useState(false);
            const reasons = [
                "The way your eyes sparkle when you laugh.", "How you make everyone around you feel special.", "Your incredible kindness to strangers.", "The way you scrunch your nose when you're thinking.",
                "Your unwavering support for my dreams.", "How you make even a grocery trip an adventure.", "The warmth of your hugs after a long day.", "Your terrible (but adorable) dance moves.",
                "The way you understand me without words.", "Simply because you are you.", "Your infectious energy.", "The way you look at me.", "Your cute morning voice.", "How you sing when no one is watching.",
                "Your dedication to your work.", "The way you play with your hair.", "Your handwritten notes.", "How you always know what to say.", "Your sense of humor.", "The way you listen to me.",
                "Your gentle touch.", "How you make me want to be a better person.", "Your patience.", "The way you love your family.", "How you remember the small details.", "Your adventurous spirit.",
                "The way you handle challenges.", "Your beautiful mind.", "How you make our house feel like a home.", "Your style.", "The way you smell.", "How you light up a room.", "Your passion for life.",
                "The way you hold my hand.", "Your ability to forgive.", "How you make me laugh until my stomach hurts.", "Your generosity.", "The way you surprise me.", "Your confidence.", "How you comfort me.",
                "Your endless curiosity.", "The way you dream big.", "Your honesty.", "How you respect others.", "Your love for animals.", "The way you organize things.", "Your creativity.", "How you always have my back.",
                "Your cute sneezes.", "The way you sleep.", "Your thoughtful gifts.", "How you make boring things fun.", "Your intelligence.", "The way you motivate me.", "Your loyalty.", "How you embrace your flaws.",
                "Your optimism.", "The way you cook.", "Your storytelling.", "How you value our time together.", "Your strength.", "The way you forgive.", "Your calming presence.", "How you make me feel safe.",
                "Your beautiful handwriting.", "The way you take photos.", "Your taste in music.", "How you appreciate nature.", "Your ambition.", "The way you encourage me.", "Your soft hands.", "How you handle stress.",
                "Your playfulness.", "The way you love unconditionally.", "Your wisdom.", "How you make friends easily.", "Your glowing skin.", "The way you walk.", "Your ability to listen.", "How you prioritize us.",
                "Your sweet texts.", "The way you look in that one dress.", "Your bravery.", "How you make me feel loved.", "Your spontaneity.", "The way you care for plants.", "Your focus.", "How you celebrate my wins.",
                "Your grace.", "The way you accept me.", "Your cute habits.", "How you make memories.", "Your reliability.", "The way you compromise.", "Your tenderness.", "How you make me believe in magic.",
                "Your gorgeous smile.", "The way you say my name.", "Just being your wonderful self.", "Everything about you."
            ];
            const getRandomReason = () => {
                setIsAnimating(true);
                setTimeout(() => {
                    setCurrentReason(reasons[Math.floor(Math.random() * reasons.length)]);
                    setIsAnimating(false);
                }, 500);
            };
            return (
                <div className="py-24 bg-white">
                    <div className="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                        <SectionHeading title="100 Reasons Why" subtitle="I could list a million, but let's start with a few." icon={Quote} />
                        <div className="bg-gradient-to-br from-pink-50 to-purple-50 rounded-3xl p-10 md:p-16 shadow-lg border border-pink-100 relative overflow-hidden">
                            <div className="absolute top-0 right-0 -mt-10 -mr-10 text-pink-200 opacity-20"><Heart size={150} /></div>
                            <div className="relative z-10 min-h-[200px] flex flex-col items-center justify-center">
                                {currentReason ? (
                                    <div className={`transition-all duration-500 transform ${isAnimating ? 'opacity-0 scale-90' : 'opacity-100 scale-100'}`}>
                                        <Quote className="w-8 h-8 text-pink-300 mx-auto mb-4 rotate-180" />
                                        <p className="text-2xl md:text-3xl font-serif text-gray-800 leading-tight">{currentReason}</p>
                                        <Quote className="w-8 h-8 text-pink-300 mx-auto mt-4" />
                                    </div>
                                ) : (
                                    <p className="text-xl text-gray-500 font-light italic">Click the button to reveal a reason why I love you...</p>
                                )}
                            </div>
                            <div className="mt-10">
                                <button onClick={getRandomReason} disabled={isAnimating} className="group relative inline-flex items-center gap-3 px-8 py-4 bg-pink-500 text-white rounded-full font-bold shadow-md hover:bg-pink-600 transition-all disabled:opacity-70">
                                    <Shuffle className={`w-5 h-5 ${isAnimating ? 'animate-spin' : ''}`} />
                                    <span>{currentReason ? "Give Me Another Reason" : "Tell Me Why"}</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const MagicWand = () => {
            const [activeTab, setActiveTab] = useState('horoscope');
            const [input, setInput] = useState('');
            const [result, setResult] = useState('');
            const [loading, setLoading] = useState(false);

            // --- GEMINI API HELPER ---
            const callGemini = async (prompt) => {
                // ---------------------------------------------------------
                // üî¥ PASTE YOUR API KEY HERE
                // ---------------------------------------------------------
                const apiKey = "AIzaSyBYpEwGt2vC8rBmWhaUKLURNXn99j2ou0U"; 
                
                if (!apiKey) return "Please add your API Key in the code to make the magic work! ‚ú®";

                const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
                const delay = (ms) => new Promise(resolve => setTimeout(resolve, ms));

                for (let i = 0; i < 3; i++) {
                    try {
                        const response = await fetch(url, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
                        });
                        if (!response.ok) throw new Error(`API call failed`);
                        const data = await response.json();
                        return data.candidates?.[0]?.content?.parts?.[0]?.text || "The magic faded...";
                    } catch (error) {
                        if (i === 2) return "The magical stars are cloudy right now. ‚ú®";
                        await delay(Math.pow(2, i) * 1000);
                    }
                }
            };

            const generateMagic = async () => {
                if (!input.trim()) return;
                setLoading(true);
                setResult('');

                if (activeTab === 'calculator') {
                    await new Promise(resolve => setTimeout(resolve, 2000));
                    
                    const names = input.toLowerCase();
                    const hasSarmad = names.includes('sarmad');
                    const hasAyenaOrAnu = names.includes('ayena') || names.includes('anu');

                    if (hasSarmad && hasAyenaOrAnu) {
                        const score = 100 + Math.floor(Math.random() * 1000); 
                        setResult(`‚ù§Ô∏è Compatibility Score: ${score}% \n\nAnalysis: A match written in the stars! No calculator can measure a love this infinite. \n\nVerdict: Soulmates Forever. üíç`);
                    } else {
                        setResult(`‚ùì Unknown Pair \n\nThis Royal Calculator is exclusively calibrated for Sarmad and Ayena (Anu). Please enter the correct names to reveal the magic.`);
                    }
                    
                    setLoading(false);
                    return;
                }

                let prompt = "";
                if (activeTab === 'horoscope') {
                    prompt = `Write a short, mystical, and extremely positive daily horoscope for Queen Anu for the date ${input}. IMPORTANT: Write in a warm, human, and admiring tone. Do not use standard robotic AI phrases. Focus entirely on her beauty, radiance, and how loved she is. Predict joy and magic. Use celestial emojis like ‚ú®, üåô, üíñ, ü™ê.`;
                } else if (activeTab === 'poem') {
                    prompt = `Write a short, very romantic, rhyming poem for my wife Anu about: "${input}". Use a fairy-tale / princess theme. IMPORTANT: Write it simply and sincerely, as if written by a loving husband, not an AI. Avoid complex words. Keep it under 100 words. Include emojis like üëë, üíñ, ‚ú®.`;
                } else if (activeTab === 'date') {
                    prompt = `Suggest 3 unique and romantic date night ideas for my wife Anu based on the vibe: "${input}". Write in a fun, casual, and excited tone (not robotic). The ideas should be suitable for a queen. Format with emojis.`;
                }
                const text = await callGemini(prompt);
                setResult(text);
                setLoading(false);
            };

            return (
                <div className="py-24 bg-white relative">
                    <div className="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
                        <SectionHeading title="The Royal Scribe" subtitle="Use a little magic to create something special for her." icon={Wand2} />
                        <div className="bg-pink-50 rounded-3xl p-8 border border-pink-100 shadow-xl">
                            <div className="flex flex-wrap justify-center gap-4 mb-8">
                                <button onClick={() => { setActiveTab('horoscope'); setResult(''); setInput(''); }} className={`flex items-center px-6 py-3 rounded-full text-sm font-bold transition-all ${activeTab === 'horoscope' ? 'bg-pink-500 text-white shadow-lg scale-105' : 'bg-white text-pink-400 hover:bg-pink-100'}`}>
                                    <Moon className="w-4 h-4 mr-2" /> Horoscope
                                </button>
                                <button onClick={() => { setActiveTab('poem'); setResult(''); setInput(''); }} className={`flex items-center px-6 py-3 rounded-full text-sm font-bold transition-all ${activeTab === 'poem' ? 'bg-pink-500 text-white shadow-lg scale-105' : 'bg-white text-pink-400 hover:bg-pink-100'}`}>
                                    <Feather className="w-4 h-4 mr-2" /> Write a Poem
                                </button>
                                <button onClick={() => { setActiveTab('date'); setResult(''); setInput(''); }} className={`flex items-center px-6 py-3 rounded-full text-sm font-bold transition-all ${activeTab === 'date' ? 'bg-pink-500 text-white shadow-lg scale-105' : 'bg-white text-pink-400 hover:bg-pink-100'}`}>
                                    <Map className="w-4 h-4 mr-2" /> Date Ideas
                                </button>
                                <button onClick={() => { setActiveTab('calculator'); setResult(''); setInput(''); }} className={`flex items-center px-6 py-3 rounded-full text-sm font-bold transition-all ${activeTab === 'calculator' ? 'bg-pink-500 text-white shadow-lg scale-105' : 'bg-white text-pink-400 hover:bg-pink-100'}`}>
                                    <Calculator className="w-4 h-4 mr-2" /> Calculator
                                </button>
                            </div>
                            <div className="bg-white rounded-2xl p-6 shadow-sm">
                                <label className="block text-sm font-medium text-gray-700 mb-2">{activeTab === 'poem' ? "What should the poem be about?" : activeTab === 'date' ? "What is the vibe for the date?" : activeTab === 'calculator' ? "Enter our names:" : "Select a date for your reading:"}</label>
                                <div className="flex gap-4 flex-col sm:flex-row">
                                    {activeTab === 'horoscope' ? (
                                        <input type="date" value={input} onChange={(e) => setInput(e.target.value)} className="flex-1 rounded-xl border-pink-200 focus:border-pink-500 focus:ring-pink-500 p-3 bg-pink-50/50" />
                                    ) : (
                                        <input type="text" value={input} onChange={(e) => setInput(e.target.value)} placeholder={activeTab === 'poem' ? "e.g., Her smile..." : activeTab === 'date' ? "e.g., Cozy..." : "e.g., Anu & Sarmad"} className="flex-1 rounded-xl border-pink-200 focus:border-pink-500 focus:ring-pink-500 p-3 bg-pink-50/50" />
                                    )}
                                    <button onClick={generateMagic} disabled={loading || !input.trim()} className="bg-gradient-to-r from-pink-400 to-purple-400 text-white px-8 py-3 rounded-xl font-bold shadow-md hover:shadow-lg hover:scale-105 transition-all disabled:opacity-50 min-w-[140px]">
                                        {loading ? <div className="animate-spin h-5 w-5 border-2 border-white border-t-transparent rounded-full"/> : <>Reveal ‚ú®</>}
                                    </button>
                                </div>
                            </div>
                            {result && (
                                <div className="mt-8 animate-fade-in">
                                    <div className="bg-white border-2 border-pink-100 rounded-2xl p-8 relative overflow-hidden">
                                        <div className="absolute top-0 right-0 -mt-4 -mr-4 bg-pink-100 h-20 w-20 rounded-full blur-2xl opacity-50"></div>
                                        <div className="absolute bottom-0 left-0 -mb-4 -ml-4 bg-purple-100 h-20 w-20 rounded-full blur-2xl opacity-50"></div>
                                        <h3 className="text-center font-serif text-xl text-pink-600 mb-4 font-bold flex items-center justify-center gap-2">
                                            <Sparkles className="w-4 h-4" /> {activeTab === 'poem' ? "A Poem for Her" : activeTab === 'horoscope' ? "Her Royal Destiny" : activeTab === 'calculator' ? "Love Analysis" : "Royal Recommendations"} <Sparkles className="w-4 h-4" />
                                        </h3>
                                        <div className="prose prose-pink mx-auto text-center text-gray-600 font-light leading-relaxed whitespace-pre-wrap">{result}</div>
                                    </div>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        const Messages = () => {
            const messages = [
                {
                    title: "My Appreciation",
                    text: "For the little things you do that go unnoticed, and the big things that hold us together. I see you, and I appreciate you.",
                    icon: Star
                },
                {
                    title: "My Love",
                    text: "You are the most beautiful person I know, inside and out. Loving you is the easiest thing I've ever done.",
                    icon: Heart
                },
                {
                    title: "My Promise",
                    text: "To always be your biggest fan, your shoulder to lean on, and your partner in every adventure life throws our way.",
                    icon: Sparkles
                }
            ];

            return (
                <div className="py-24 bg-pink-50 relative overflow-hidden">
                    <div className="absolute inset-0 opacity-[0.03]" style={{ backgroundImage: 'radial-gradient(#ec4899 1px, transparent 1px)', backgroundSize: '30px 30px' }}></div>

                    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
                        <SectionHeading 
                            title="Why I Adore You" 
                            subtitle="Just a few reasons why you are the queen of my heart."
                            icon={MessageCircle}
                        />

                        <div className="grid md:grid-cols-3 gap-8">
                            {messages.map((msg, idx) => (
                                <div key={idx} className="bg-white/80 backdrop-blur border border-pink-100 rounded-2xl p-8 shadow-sm hover:shadow-lg hover:shadow-pink-100/50 transition-all duration-300 text-center group">
                                    <div className="w-14 h-14 bg-pink-50 rounded-full flex items-center justify-center mx-auto mb-6 text-pink-400 group-hover:scale-110 group-hover:bg-pink-100 transition-all">
                                        <msg.icon className="w-7 h-7" />
                                    </div>
                                    <h3 className="text-xl font-serif font-bold text-gray-800 mb-4">{msg.title}</h3>
                                    <p className="text-gray-500 leading-relaxed font-light">"{msg.text}"</p>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            );
        };

        const Footer = () => (
            <footer className="bg-white border-t border-pink-100 py-12 text-center">
                <div className="flex flex-col items-center justify-center mb-4">
                    <div className="flex items-center gap-2">
                        <Crown className="w-5 h-5 text-pink-400" />
                        <span className="text-xl font-serif text-gray-800">Forever Yours</span>
                    </div>
                    <span className="text-lg font-serif text-pink-500 mt-1">sk7</span>
                </div>
                <p className="text-gray-400 text-sm">Created with all my love.</p>
            </footer>
        );

        const App = () => {
            const [isPlaying, setIsPlaying] = useState(false);
            const [showConfetti, setShowConfetti] = useState(false);
            const audioRef = useRef(null);
            const songUrl = "https://cdn.pixabay.com/download/audio/2022/05/27/audio_1808fbf07a.mp3?filename=romantic-piano-111583.mp3";

            const toggleAudio = async () => {
                if (!audioRef.current) return;
                try {
                    if (isPlaying) {
                        audioRef.current.pause();
                        setIsPlaying(false);
                    } else {
                        await audioRef.current.play();
                        setIsPlaying(true);
                    }
                } catch (error) {
                    console.error("Audio playback failed:", error);
                    setIsPlaying(false);
                }
            };

            const triggerConfetti = async () => {
                setShowConfetti(true);
                if (!isPlaying && audioRef.current) {
                    try { await audioRef.current.play(); setIsPlaying(true); } catch (error) { console.log("Autoplay blocked:", error); }
                }
                setTimeout(() => setShowConfetti(false), 5000);
            };

            return (
                <div className="min-h-screen bg-white font-sans text-gray-900 selection:bg-pink-200 selection:text-pink-900">
                    <audio ref={audioRef} src={songUrl} loop crossOrigin="anonymous" onError={(e) => console.log("Audio loading error", e)} />
                    <ConfettiCanvas isActive={showConfetti} />
                    <Navbar isPlaying={isPlaying} toggleAudio={toggleAudio} />
                    <main>
                        <Hero triggerConfetti={triggerConfetti} />
                        <OurJourney />
                        <Gallery />
                        <OpenWhenLetters />
                        <ReasonsWhy />
                        <MagicWand />
                        <Messages />
                    </main>
                    <Footer />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>